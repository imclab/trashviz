var getMin=function(poly,idx){idx="undefined"!=typeof idx?idx:0;var min=9999999999;return poly.forEach(function(point){point[idx]<min&&(min=point[idx])}),min},getMax=function(poly,idx){idx="undefined"!=typeof idx?idx:0;var max=-9999999999;return poly.forEach(function(point){point[idx]>max&&(max=point[idx])}),max},getPolygonCenter=function(poly){var minX=getMin(poly,0),maxX=getMax(poly,0),minY=getMin(poly,1),maxY=getMax(poly,1),centerX=(minX+maxX)/2,centerY=(minY+maxY)/2;return[centerX,centerY]},toContext=function($el){var c=$el.get(0);return c.width=$el.height(),c.height=$el.width(),c.getContext("2d")},invertY=function(poly){var out=[];return poly.forEach(function(point){out.push([point[0],-point[1]])}),out},normalizePolygon=function(polygon,center){var scale=12200,norm=[];return polygon.forEach(function(point){norm.push([scale*(point[0]-center[0]),scale*(point[1]-center[1])])}),invertY(norm)},drawPolygon=function($canvas,polygon){var context=toContext($canvas);Sketch.augment(context,{fullscreen:!1,retina:!1,width:300,height:300,setup:function(){this.r=this.g=this.b=Math.random(100,200)},mousemove:function(){this.r=255*(this.mouse.x/this.canvasWidth),this.g=255*Math.random(),this.b=255*Math.abs(Math.cos(Math.PI*this.mouse.y/this.width))},draw:function(){var _sketch=this;this.fillStyle="#212124";var center=getPolygonCenter(polygon),normPolygon=normalizePolygon(polygon,center);this.beginPath(),this.moveTo(150,150),normPolygon.forEach(function(point){_sketch.lineTo(150+point[0],150+point[1])}),this.fill(),setTimeout(this.stop,5)}})},reverseXY=function(poly){var out=[];return poly.forEach(function(point){out.push([point[1],point[0]])}),out},renderPolygons=function(features){features.forEach(function(feature){var id=feature.properties.id,coords=feature.geometry.coordinates[0];drawPolygon($("#landfill-"+id+" canvas"),coords)})};$(function(){$.ajax("/landfills.json",{success:function(data){renderPolygons(data)}})});